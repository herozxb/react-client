(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{150:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAGCAYAAADgzO9IAAAAAXNSR0IArs4c6QAAAExJREFUCB1jbPh/le3lx5tNDIwMcQwg8J9hkTi/eh0LWJCBoRwoAAPlQDEGJrhKmDCIBupmQuYjs5lAZiILgNlAMRaQRSAz4UZCLQcAIwYaiAejKoYAAAAASUVORK5CYII="},316:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAAXNSR0IArs4c6QAAAHBJREFUGBmNkAEKwCAMA2VfGP2mrx3sOV2us6IymIXQGlNTW9zdhCqcZQm4dmelFUp+CZZa6sYpeUVIFyIixMqjCO51Wy5unQExuYSbSF5JASLqPsqRM21lOoWc89tagr3PSMgOiWlwnUeXWA/E78IfuAX270S3ydAAAAAASUVORK5CYII="},328:function(e,t,n){e.exports=n(575)},334:function(e,t,n){},366:function(e,t){},535:function(e,t,n){},569:function(e,t,n){},570:function(e,t,n){},571:function(e,t,n){},572:function(e,t,n){},573:function(e,t,n){},574:function(e,t,n){},575:function(e,t,n){"use strict";n.r(t);var a=n(77),r=n.n(a);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var o=n(0),l=n.n(o),c=n(27),u=n(66),m=n(588),s=(n(333),n(334),n(18)),i=n(57),d=n(284),g=n.n(d),b={user:null,id:null};if(localStorage.getItem("jwtToken")){var E=g()(localStorage.getItem("jwtToken"));1e3*E.exp<Date.now()?localStorage.removeItem("jwtToken"):b.user=E}var p=Object(o.createContext)({user:null,id:null,login:function(e){},logout:function(){}});function f(e,t){switch(console.log("=========1.2========"),console.log(t.payload),console.log("=========1.3========"),t.type){case"LOGIN":return Object(i.a)({},e,{user:t.payload,id:t.payload});case"LOGOUT":return Object(i.a)({},e,{user:null});default:return e}}function h(e){var t=Object(o.useReducer)(f,b),n=Object(s.a)(t,2),a=n[0],r=n[1];return l.a.createElement(p.Provider,Object.assign({value:{user:a.user,id:a.id,login:function(e){console.log("=========1.1========"),console.log(e),localStorage.setItem("jwtToken",e.token),r({type:"LOGIN",payload:e})},logout:function(){localStorage.removeItem("jwtToken"),r({type:"LOGOUT"})}}},e))}var v=n(285);var y=function(e){var t=e.component,n=Object(v.a)(e,["component"]),a=Object(o.useContext)(p).user;return l.a.createElement(u.b,Object.assign({},n,{render:function(e){return a?l.a.createElement(u.a,{to:"/"}):l.a.createElement(t,e)}}))},A=n(596),j=n(141),C=n.n(j);C()("http://192.168.1.101:2001");var O=function(){var e=Object(o.useContext)(p),t=e.user,n=e.logout,a=window.location.pathname,r="/"===a?"home":a.substr(1),u=Object(o.useState)(r),m=Object(s.a)(u,2),i=m[0],d=m[1],g=function(e){d(e)},b=t?"/chat?name="+t.username+"&room=room":"/chat?name=default&room=room";return t?l.a.createElement(A.a,{pointing:!0,size:"massive",color:"blue"},l.a.createElement(A.a.Item,{name:t.username,active:"home"===i,onClick:function(){return g("home")},as:c.b,to:"/"}),l.a.createElement(A.a.Menu,{position:"right"},l.a.createElement(A.a.Item,{name:"\u804a\u5929",active:"chat"===i,onClick:function(){return g("chat")},as:c.b,to:b}),l.a.createElement(A.a.Item,{name:"\u4e2a\u4eba",active:"profile"===i,onClick:function(){return g("profile")},as:c.b,to:"/profile"}),l.a.createElement(A.a.Item,{name:"\u767b\u51fa",onClick:n}))):l.a.createElement(A.a,{pointing:!0,size:"massive",color:"blue"},l.a.createElement(A.a.Item,{name:"\u4e3b\u9875",active:"home"===i,onClick:function(){return g("home")},as:c.b,to:"/"}),l.a.createElement(A.a.Menu,{position:"right"},l.a.createElement(A.a.Item,{name:"\u767b\u5165",active:"login"===i,onClick:function(){return g("login")},as:c.b,to:"/login"}),l.a.createElement(A.a.Item,{name:"\u6ce8\u518c",active:"register"===i,onClick:function(){return g("register")},as:c.b,to:"/register"})))},k=n(25),I=n(598),w=n(587),x=n(597),S=n(97),N=n(593),$=n(600),P=n(594),_=n(317),D=n(595),R=n(151),B=n(80),M=n.n(B),T=n(20),L=n(21),Q=n.n(L),U=n(592);var G=function(e){var t=e.content,n=e.children;return l.a.createElement(U.a,{inverted:!0,content:t,trigger:n})};function q(){var e=Object(T.a)(["\n  mutation likePost($postId: ID!) {\n    likePost(postId: $postId) {\n      id\n      likes {\n        id\n        username\n      }\n      likeCount\n    }\n  }\n"]);return q=function(){return e},e}var z=Q()(q()),J=function(e){var t=e.user,n=e.post,a=n.id,r=n.likeCount,u=n.likes,m=Object(o.useState)(!1),i=Object(s.a)(m,2),d=i[0],g=i[1];Object(o.useEffect)(function(){t&&u.find(function(e){return e.username===t.username})?g(!0):g(!1)},[t,u]);var b=Object(k.a)(z,{variables:{postId:a}}),E=Object(s.a)(b,1)[0],p=t?d?l.a.createElement(D.a,{color:"red"},l.a.createElement(S.a,{name:"heart"})):l.a.createElement(D.a,{color:"red",basic:!0},l.a.createElement(S.a,{name:"heart"})):l.a.createElement(D.a,{as:c.b,to:"/login",color:"red",basic:!0},l.a.createElement(S.a,{name:"heart"}));return l.a.createElement(D.a,{as:"div",labelPosition:"right",onClick:E},l.a.createElement(G,{content:d?"Unlike":"Like"},p),l.a.createElement(R.a,{basic:!0,color:"red",pointing:"left"},r))},W=n(590);function Y(){var e=Object(T.a)(["\n  mutation createAreaPost($body: String!,$thoughtArea: String!) {\n    createAreaPost(body: $body, thoughtArea: $thoughtArea) {\n      id\n      body\n      createdAt\n      username\n      likes {\n        id\n        username\n        createdAt\n      }\n      likeCount\n      comments {\n        id\n        body\n        username\n        createdAt\n      }\n      commentCount\n      thoughtArea\n    }\n  }\n"]);return Y=function(){return e},e}function V(){var e=Object(T.a)(["\n  query($thoughtArea: String!) {\n    getAreaPosts(thoughtArea: $thoughtArea) {\n      id\n      body\n      createdAt\n      username\n      likeCount\n      likes {\n        username\n      }\n      commentCount\n      comments {\n        id\n        username\n        createdAt\n        body\n      }\n      thoughtArea\n    }\n  }\n"]);return V=function(){return e},e}function F(){var e=Object(T.a)(["\n  {\n    getPosts {\n      id\n      body\n      createdAt\n      username\n      likeCount\n      likes {\n        username\n      }\n      commentCount\n      comments {\n        id\n        username\n        createdAt\n        body\n      }\n    }\n  }\n"]);return F=function(){return e},e}var K=Q()(F()),H=Q()(V());Q()(Y());function X(){var e=Object(T.a)(["\n  mutation deleteComment($postId: ID!, $commentId: ID!) {\n    deleteComment(postId: $postId, commentId: $commentId) {\n      id\n      comments {\n        id\n        username\n        createdAt\n        body\n      }\n      commentCount\n    }\n  }\n"]);return X=function(){return e},e}function Z(){var e=Object(T.a)(["\n  mutation deletePost($postId: ID!) {\n    deletePost(postId: $postId)\n  }\n"]);return Z=function(){return e},e}var ee=Q()(Z()),te=Q()(X()),ne=function(e){var t=e.postId,n=e.commentId,a=e.callback,r=Object(o.useState)(!1),c=Object(s.a)(r,2),u=c[0],m=c[1],i=n?te:ee,d=Object(k.a)(i,{update:function(e){if(m(!1),!n){var r=e.readQuery({query:K});r.getPosts=r.getPosts.filter(function(e){return e.id!==t}),e.writeQuery({query:K,data:r})}a&&a()},variables:{postId:t,commentId:n}}),g=Object(s.a)(d,1)[0];return l.a.createElement(l.a.Fragment,null,l.a.createElement(G,{content:n?"Delete comment":"Delete post"},l.a.createElement(D.a,{as:"div",color:"red",floated:"right",onClick:function(){return m(!0)}},l.a.createElement(S.a,{name:"trash",style:{margin:0}}))),l.a.createElement(W.a,{open:u,onCancel:function(){return m(!1)},onConfirm:g}))};var ae=function(e){var t=e.post,n=t.body,a=t.createdAt,r=t.id,u=t.username,m=t.likeCount,s=t.commentCount,i=t.likes,d=Object(o.useContext)(p).user;return l.a.createElement(P.a,{fluid:!0},l.a.createElement(P.a.Content,null,l.a.createElement(_.a,{floated:"right",size:"mini",src:"https://react.semantic-ui.com/images/avatar/large/molly.png"}),l.a.createElement(P.a.Header,null,u),l.a.createElement(P.a.Meta,{as:c.b,to:"/posts/".concat(r)},M()(a).fromNow(!0)),l.a.createElement(P.a.Description,null,n)),l.a.createElement(P.a.Content,null,l.a.createElement("iframe",{src:"//player.bilibili.com/player.html?aid=8438275&bvid=BV1hx41117tE&cid=13892333&page=1",scrolling:"no",border:"0",frameborder:"no",framespacing:"0",allowfullscreen:"true"}," ")),l.a.createElement(P.a.Content,{extra:!0},l.a.createElement(J,{user:d,post:{id:r,likes:i,likeCount:m}}),l.a.createElement(G,{content:"Comment on post"},l.a.createElement(D.a,{labelPosition:"right",as:c.b,to:"/posts/".concat(r)},l.a.createElement(D.a,{color:"blue",basic:!0},l.a.createElement(S.a,{name:"comments"})),l.a.createElement(R.a,{basic:!0,color:"blue",pointing:"left"},s))),d&&d.username===u&&l.a.createElement(ne,{postId:r})))},re=n(110),oe=n(35),le=n(589),ce=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object(o.useState)(t),a=Object(s.a)(n,2),r=a[0],l=a[1];return{onChange:function(e){l(Object(i.a)({},r,Object(oe.a)({},e.target.name,e.target.value)))},onSubmit:function(t){t.preventDefault(),e()},values:r}};function ue(){var e=Object(T.a)(["\n  mutation createAreaPost($body: String!,$thoughtArea: String!) {\n    createAreaPost(body: $body, thoughtArea: $thoughtArea) {\n      id\n      body\n      createdAt\n      username\n      likes {\n        id\n        username\n        createdAt\n      }\n      likeCount\n      comments {\n        id\n        body\n        username\n        createdAt\n      }\n      commentCount\n      thoughtArea\n    }\n  }\n"]);return ue=function(){return e},e}function me(){var e=Object(T.a)(["\n  mutation createPost($body: String!) {\n    createPost(body: $body) {\n      id\n      body\n      createdAt\n      username\n      likes {\n        id\n        username\n        createdAt\n      }\n      likeCount\n      comments {\n        id\n        body\n        username\n        createdAt\n      }\n      commentCount\n    }\n  }\n"]);return me=function(){return e},e}Q()(me());var se=Q()(ue()),ie=function(e){var t=e.area;e.onAreaChange,console.log("=========function_iput==========="),console.log(t);var n=Object(o.useState)(""),a=Object(s.a)(n,2),r=a[0],c=a[1],u=Object(o.useState)("default"),m=Object(s.a)(u,2),d=m[0],g=m[1],b=Object(k.a)(se,{variables:{body:r.body,thoughtArea:d.thoughtArea},update:function(e,t){var n=e.readQuery({query:H,variables:{thoughtArea:d.thoughtArea}});n.getAreaPosts=[t.data.createAreaPost].concat(Object(re.a)(n.getAreaPosts)),e.writeQuery({query:H,variables:{thoughtArea:d.thoughtArea},data:n}),r.body=""}}),E=Object(s.a)(b,2),p=E[0],f=E[1].error;return Object(o.useEffect)(function(){console.log("====useEffect1.0======"),console.log(t)}),l.a.createElement(l.a.Fragment,null,l.a.createElement(le.a,{onSubmit:function(e){e.preventDefault(),p()}},l.a.createElement(w.a,{horizontal:!0},l.a.createElement(x.a,{as:"h3"},l.a.createElement(S.a,{name:"comments",color:"blue"}),"\u53d1\u8868 \u4f60\u7684 \u601d\u60f3")),l.a.createElement(le.a.Field,null,l.a.createElement(le.a.Input,{placeholder:"\u4e16\u754c \u4f60\u597d!",name:"body",onChange:function(e){c(Object(i.a)({},r,Object(oe.a)({},e.target.name,e.target.value))),console.log("=========for_input_text========"),g(Object(i.a)({},d,Object(oe.a)({},"thoughtArea",t))),console.log(Object(i.a)({},d,Object(oe.a)({},"thoughtArea",t)))},value:r.body,error:!!f}),l.a.createElement(D.a,{type:"submit",color:"blue"},"\u53d1\u5e03"))),f&&l.a.createElement("div",{className:"ui error message",style:{marginBottom:20}},l.a.createElement("ul",{className:"list"},l.a.createElement("li",null,f.graphQLErrors[0].message))))};var de=function(){var e=Object(o.useContext)(p).user,t=Object(o.useState)("Self_improvement"),n=Object(s.a)(t,2),a=n[0],r=n[1];console.log("====areaValues===="),console.log(a),console.log("Self_improvement");var c=Object(k.b)(H,{variables:{thoughtArea:a}}),u=c.loading,m=c.data.getAreaPosts;return l.a.createElement(I.a,{columns:1},l.a.createElement(I.a.Row,null,l.a.createElement(I.a.Column,null,l.a.createElement(w.a,{horizontal:!0},l.a.createElement(x.a,{as:"h3"},l.a.createElement(S.a,{name:"search",color:"blue"}),"\u641c\u7d22 \u601d\u60f3 \u9886\u57df"))),l.a.createElement(I.a.Column,null,l.a.createElement(N.a,{options:[{key:"1",text:"\u4e2a\u4eba\u4fee\u517b",value:"Self_improvement"},{key:"2",text:"\u4eba\u9645\u5173\u7cfb",value:"Relationship"},{key:"3",text:"\u4e16\u754c\u5173\u7cfb",value:"Wolrd"},{key:"4",text:"\u5065\u5eb7",value:"Health"},{key:"5",text:"\u6210\u529f",value:"Success"},{key:"6",text:"\u68a6\u60f3",value:"Dream"},{key:"7",text:"\u6539\u53d8\u4e16\u754c",value:"Change_the_world"},{key:"8",text:"\u52c7\u6562\u53bb\u505a",value:"Brave_to_do"},{key:"9",text:"Innovative Ideas",value:"Innovative Ideas"},{key:"10",text:"\u5de5\u4f5c",value:"Job"},{key:"11",text:"\u5f00\u516c\u53f8",value:"Company"},{key:"12",text:"\u5e72",value:"do"},{key:"13",text:"\u65f6\u95f4 Time",value:"Time"},{key:"14",text:"\u75db\u82e6 Pain",value:"Pain"},{key:"15",text:"\u8d22\u5bcc Wealth",value:"Wealth"},{key:"16",text:"\u8bf4\u8bdd",value:"Speak"},{key:"17",text:"\u5bb6\u5ead",value:"Family"},{key:"18",text:"\u5e74\u8f7b",value:"Young"},{key:"19",text:"\u4e00\u5ff5\u4e4b\u5dee",value:"Danger_thought"},{key:"20",text:"\u501f\u53e3",value:"Excuse"},{key:"21",text:"\u5584\u4e0e\u6076",value:"good_or_evil"},{key:"22",text:"\u5bf9\u4ed8\u574f\u4eba",value:"Enemy"},{key:"23",text:"\u6b63\u4e49 Justice",value:"Justice"},{key:"24",text:"\u7eaa\u5ff5 Memory",value:"Memory"},{key:"25",text:"\u4eca\u5929",value:"Today"},{key:"26",text:"\u8ba1\u5212 Plan",value:"Plan"},{key:"27",text:"\u79d1\u6280\u9769\u547d",value:"Revolution"}],placeholder:"\u641c\u7d22 \u601d\u60f3 \u9886\u57df",search:!0,fluid:!0,selection:!0,allowAdditions:!0,scrolling:!0,value:a,onAddItem:null,onChange:function(e,t){var n=t.value;r(n)}}))),l.a.createElement(I.a.Row,null,e&&l.a.createElement(I.a.Column,null,l.a.createElement(ie,{area:a,onAreaChange:r})),u?l.a.createElement("h1",null,"loading..."):l.a.createElement($.a.Group,null,l.a.createElement(I.a.Column,null,l.a.createElement(w.a,{horizontal:!0},l.a.createElement("h3",null,"\u6700\u65b0"))),m&&m.map(function(e){return l.a.createElement(I.a.Column,{key:e.id,style:{marginBottom:20}},l.a.createElement(ae,{post:e}))}))))};function ge(){var e=Object(T.a)(["\n  query($username: String!) {\n    getUserPosts(username: $username) {\n      id\n      body\n      createdAt\n      username\n      likeCount\n      likes {\n        username\n      }\n      commentCount\n      comments {\n        id\n        username\n        createdAt\n        body\n      }\n    }\n  }\n"]);return ge=function(){return e},e}function be(){var e=Object(T.a)(["\n  query($postId: ID!) {\n    getPost(postId: $postId) {\n      id\n      body\n      createdAt\n      username\n      likeCount\n      likes {\n        username\n      }\n      commentCount\n      comments {\n        id\n        username\n        createdAt\n        body\n      }\n    }\n  }\n"]);return be=function(){return e},e}function Ee(){var e=Object(T.a)(["\n  mutation($postId: String!, $body: String!) {\n    createComment(postId: $postId, body: $body) {\n      id\n      comments {\n        id\n        body\n        createdAt\n        username\n      }\n      commentCount\n    }\n  }\n"]);return Ee=function(){return e},e}function pe(){var e=Object(T.a)(["\n  mutation login($username: String!, $password: String!) {\n    login(username: $username, password: $password) {\n      id\n      email\n      username\n      createdAt\n      token\n    }\n  }\n"]);return pe=function(){return e},e}Q()(pe()),Q()(Ee()),Q()(be());var fe=Q()(ge()),he=function(e){var t=Object(o.useContext)(p),n=null,a=null;null===t.user?(n="default",a=!0):(n=t.user.username,a=!1,t.user.createdAt);var r,c=Object(k.b)(fe,{variables:{username:n}}),u=c.loading,m=c.data.getUserPosts,i=Object(o.useState)("home"),d=Object(s.a)(i,2);d[0],d[1],m?(m.id,m.body,m.createdAt,m.username,m.comments,m.likes,m.likeCount,m.commentCount,r=l.a.createElement("div",null,a?l.a.createElement("h1",null,"You are not logged in..."):l.a.createElement(I.a,{centered:!0},l.a.createElement(I.a.Column,{centered:!0,width:20},l.a.createElement(P.a,null,l.a.createElement(_.a,{src:"https://react.semantic-ui.com/images/avatar/large/daniel.jpg",wrapped:!0,ui:!1}),l.a.createElement(P.a.Content,null,l.a.createElement(P.a.Header,null,t.user.username),l.a.createElement(P.a.Meta,null,M()(t.user.createdAt).fromNow(!0)),l.a.createElement(P.a.Description,null,"Daniel is a comedian living in Nashville.")),l.a.createElement(P.a.Content,{extra:!0},l.a.createElement("a",null,l.a.createElement(S.a,{name:"user"}),"10 Friends"))),l.a.createElement(I.a.Row,null,t.user&&l.a.createElement(I.a.Column,null,l.a.createElement(ie,null)),u?l.a.createElement("h1",null,"Loading posts.."):l.a.createElement($.a.Group,null,l.a.createElement(I.a.Column,null,l.a.createElement(w.a,{horizontal:!0},l.a.createElement("h3",null,"\u6700\u65b0"))),m&&m.map(function(e){return l.a.createElement(I.a.Column,{key:e.id,style:{marginBottom:20}},l.a.createElement(ae,{post:e}))}))))))):r=l.a.createElement("p",null,"Loading post..");return r};function ve(){var e=Object(T.a)(["\n  mutation login($username: String!, $password: String!) {\n    login(username: $username, password: $password) {\n      id\n      email\n      username\n      createdAt\n      token\n    }\n  }\n"]);return ve=function(){return e},e}var ye=Q()(ve()),Ae=function(e){var t=Object(o.useContext)(p),n=Object(o.useState)({}),a=Object(s.a)(n,2),r=a[0],c=a[1],u=ce(function(){E()},{username:"",password:""}),m=u.onChange,i=u.onSubmit,d=u.values,g=Object(k.a)(ye,{update:function(n,a){var r=a.data.login;t.login(r),e.history.push("/")},onError:function(e){c(e.graphQLErrors[0].extensions.exception.errors)},variables:d}),b=Object(s.a)(g,2),E=b[0],f=b[1].loading;return l.a.createElement("div",{className:"form-container"},l.a.createElement(le.a,{onSubmit:i,noValidate:!0,className:f?"loading":""},l.a.createElement("h1",null,"\u767b\u5165\u9875\u9762"),l.a.createElement(le.a.Input,{label:"\u7528\u6237\u540d",placeholder:"\u540d\u79f0...",name:"username",type:"text",value:d.username,error:!!r.username,onChange:m}),l.a.createElement(le.a.Input,{label:"\u5bc6\u7801",placeholder:"\u5bc6\u7801...",name:"password",type:"password",value:d.password,error:!!r.password,onChange:m}),l.a.createElement(D.a,{type:"submit",primary:!0},"\u767b\u5165")),Object.keys(r).length>0&&l.a.createElement("div",{className:"ui error message"},l.a.createElement("ul",{className:"list"},Object.values(r).map(function(e){return l.a.createElement("li",{key:e},e)}))))};function je(){var e=Object(T.a)(["\n  mutation register(\n    $username: String!\n    $email: String!\n    $password: String!\n    $confirmPassword: String!\n  ) {\n    register(\n      registerInput: {\n        username: $username\n        email: $email\n        password: $password\n        confirmPassword: $confirmPassword\n      }\n    ) {\n      id\n      email\n      username\n      createdAt\n      token\n    }\n  }\n"]);return je=function(){return e},e}var Ce=Q()(je()),Oe=function(e){var t=Object(o.useContext)(p),n=Object(o.useState)({}),a=Object(s.a)(n,2),r=a[0],c=a[1],u=ce(function(){E()},{username:"",email:"",password:"",confirmPassword:""}),m=u.onChange,i=u.onSubmit,d=u.values,g=Object(k.a)(Ce,{update:function(n,a){var r=a.data.register;t.login(r),e.history.push("/")},onError:function(e){c(e.graphQLErrors[0].extensions.exception.errors)},variables:d}),b=Object(s.a)(g,2),E=b[0],f=b[1].loading;return l.a.createElement("div",{className:"form-container"},l.a.createElement(le.a,{onSubmit:i,noValidate:!0,className:f?"loading":""},l.a.createElement("h1",null,"\u6ce8\u518c\u9875\u9762"),l.a.createElement(le.a.Input,{label:"\u7528\u6237\u540d",placeholder:"\u540d\u79f0...",name:"username",type:"text",value:d.username,error:!!r.username,onChange:m}),l.a.createElement(le.a.Input,{label:"\u90ae\u7bb1",placeholder:"\u90ae\u7bb1...",name:"email",type:"email",value:d.email,error:!!r.email,onChange:m}),l.a.createElement(le.a.Input,{label:"\u5bc6\u7801",placeholder:"\u5bc6\u7801...",name:"password",type:"password",value:d.password,error:!!r.password,onChange:m}),l.a.createElement(le.a.Input,{label:"\u518d\u6b21\u8f93\u5165\u5bc6\u7801",placeholder:"\u5bc6\u7801...",name:"confirmPassword",type:"password",value:d.confirmPassword,error:!!r.confirmPassword,onChange:m}),l.a.createElement(D.a,{type:"submit",primary:!0},"\u6ce8\u518c")),Object.keys(r).length>0&&l.a.createElement("div",{className:"ui error message"},l.a.createElement("ul",{className:"list"},Object.values(r).map(function(e){return l.a.createElement("li",{key:e},e)}))))};function ke(){var e=Object(T.a)(["\n  query($postId: ID!) {\n    getPost(postId: $postId) {\n      id\n      body\n      createdAt\n      username\n      likeCount\n      likes {\n        username\n      }\n      commentCount\n      comments {\n        id\n        username\n        createdAt\n        body\n      }\n    }\n  }\n"]);return ke=function(){return e},e}function Ie(){var e=Object(T.a)(["\n  mutation($postId: String!, $body: String!) {\n    createComment(postId: $postId, body: $body) {\n      id\n      comments {\n        id\n        body\n        createdAt\n        username\n      }\n      commentCount\n    }\n  }\n"]);return Ie=function(){return e},e}var we,xe=Q()(Ie()),Se=Q()(ke()),Ne=function(e){var t,n=e.match.params.postId,a=Object(o.useContext)(p).user,r=Object(o.useRef)(null),c=Object(o.useState)(""),u=Object(s.a)(c,2),m=u[0],i=u[1],d=Object(k.b)(Se,{variables:{postId:n}}).data.getPost,g=Object(k.a)(xe,{update:function(){i(""),r.current.blur()},variables:{postId:n,body:m}}),b=Object(s.a)(g,1)[0];if(d){var E=d.id,f=d.body,h=d.createdAt,v=d.username,y=d.comments,A=d.likes,j=d.likeCount,C=d.commentCount;t=l.a.createElement(I.a,null,l.a.createElement(I.a.Row,null,l.a.createElement(I.a.Column,{width:2},l.a.createElement(_.a,{src:"https://react.semantic-ui.com/images/avatar/large/molly.png",size:"small",float:"right"})),l.a.createElement(I.a.Column,{width:10},l.a.createElement(P.a,{fluid:!0},l.a.createElement(P.a.Content,null,l.a.createElement(P.a.Header,null,v),l.a.createElement(P.a.Meta,null,M()(h).fromNow()),l.a.createElement(P.a.Description,null,f)),l.a.createElement("hr",null),l.a.createElement(P.a.Content,{extra:!0},l.a.createElement(J,{user:a,post:{id:E,likeCount:j,likes:A}}),l.a.createElement(G,{content:"Comment on post"},l.a.createElement(D.a,{as:"div",labelPosition:"right",onClick:function(){return console.log("Comment on post")}},l.a.createElement(D.a,{basic:!0,color:"blue"},l.a.createElement(S.a,{name:"comments"})),l.a.createElement(R.a,{basic:!0,color:"blue",pointing:"left"},C))),a&&a.username===v&&l.a.createElement(ne,{postId:E,callback:function(){e.history.push("/")}}))),a&&l.a.createElement(P.a,{fluid:!0},l.a.createElement(P.a.Content,null,l.a.createElement("p",null,"Post a comment"),l.a.createElement(le.a,null,l.a.createElement("div",{className:"ui action input fluid"},l.a.createElement("input",{type:"text",placeholder:"Comment..",name:"comment",value:m,onChange:function(e){return i(e.target.value)},ref:r}),l.a.createElement("button",{type:"submit",className:"ui button blue",disabled:""===m.trim(),onClick:b},"Submit"))))),y.map(function(e){return l.a.createElement(P.a,{fluid:!0,key:e.id},l.a.createElement(P.a.Content,null,a&&a.username===e.username&&l.a.createElement(ne,{postId:E,commentId:e.id}),l.a.createElement(P.a.Header,null,e.username),l.a.createElement(P.a.Meta,null,M()(e.createdAt).fromNow()),l.a.createElement(P.a.Description,null,e.body)))}))))}else t=l.a.createElement("p",null,"Loading post..");return t},$e=n(314),Pe=n.n($e),_e=n(150),De=n.n(_e),Re=(n(535),function(e){var t=e.users;return l.a.createElement("div",{className:"textContainer_chat "},t?l.a.createElement("div",null,l.a.createElement("div",{className:"activeContainer_chat "},l.a.createElement("h2",null,t.map(function(e){var t=e.name;return l.a.createElement("div",{key:t,className:"activeItem_chat "},t,l.a.createElement("img",{alt:"Online Icon",src:De.a}))})))):null)}),Be=n(315),Me=n.n(Be),Te=(n(569),n(199)),Le=n.n(Te),Qe=function(e){var t=e.message,n=t.text,a=t.user,r=!1,o=e.name.trim().toLowerCase();return a===o&&(r=!0),r?l.a.createElement("div",{className:"messageContainer justifyEnd"},l.a.createElement("p",{className:"sentText pr-10"},o),l.a.createElement("div",{className:"messageBox backgroundBlue"},l.a.createElement("p",{className:"messageText colorWhite"},Le.a.emojify(n)))):l.a.createElement("div",{className:"messageContainer justifyStart"},l.a.createElement("div",{className:"messageBox backgroundLight"},l.a.createElement("p",{className:"messageText colorDark"},Le.a.emojify(n))),l.a.createElement("p",{className:"sentText pl-10 "},a))},Ue=(n(570),function(e){var t=e.messages,n=e.name;return l.a.createElement(Me.a,{className:"messages"},t.map(function(e,t){return l.a.createElement("div",{key:t},l.a.createElement(Qe,{message:e,name:n}))}))}),Ge=n(316),qe=n.n(Ge),ze=(n(571),function(e){e.room;return l.a.createElement("div",{className:"infoBar_chat"},l.a.createElement("div",{className:"leftInnerContainer_chat"},l.a.createElement("img",{className:"onlineIcon_chat",src:De.a,alt:"online icon"})),l.a.createElement("div",{className:"rightInnerContainer_chat"},l.a.createElement("a",{href:"/"},l.a.createElement("img",{src:qe.a,alt:"close icon"}))))}),Je=(n(572),function(e){var t=e.setMessage,n=e.sendMessage,a=e.message;return l.a.createElement("form",{className:"form_chat"},l.a.createElement("input",{className:"input_chat",type:"text",placeholder:"Type a message...",value:a,onChange:function(e){var n=e.target.value;return t(n)},onKeyPress:function(e){return"Enter"===e.key?n(e):null}}),l.a.createElement("button",{className:"sendButton_chat",onClick:function(e){return n(e)}},"Send"))}),We=(n(573),function(e){var t=e.location,n=Object(o.useState)(""),a=Object(s.a)(n,2),r=a[0],c=a[1],u=Object(o.useState)(""),m=Object(s.a)(u,2),i=m[0],d=m[1],g=Object(o.useState)(""),b=Object(s.a)(g,2),E=b[0],p=b[1],f=Object(o.useState)(""),h=Object(s.a)(f,2),v=h[0],y=h[1],A=Object(o.useState)([]),j=Object(s.a)(A,2),O=j[0],k=j[1];Object(o.useEffect)(function(){var e=Pe.a.parse(t.search),n=e.name,a=e.room;we=C()("http://120.53.220.237:2001"),d(a),c(n),we.emit("logout",{name:n,room:a},function(e){console.log("=======0.1======")}),we.emit("join",{name:n,room:a},function(e){e&&(alert(e),console.log("======1.0======="),we.emit("disconnect",{text:"send after same logger"}))})},["http://120.53.220.237:2001",t.search]),Object(o.useEffect)(function(){console.log("====3======"),console.log(O),we.on("message",function(e){console.log("=====4====="),console.log(e),console.log([].concat(Object(re.a)(O),[e])),k(function(t){return[].concat(Object(re.a)(t),[e])})}),we.on("roomData",function(e){var t=e.users;p(t)})},[]);return l.a.createElement("div",{className:"outerContainer"},l.a.createElement("div",{className:"container"},l.a.createElement(ze,{room:i}),l.a.createElement(Ue,{messages:O,name:r}),l.a.createElement(Je,{message:v,setMessage:y,sendMessage:function(e){e.preventDefault(),v&&we.emit("sendMessage",v,function(){return y("")})}})),l.a.createElement(Re,{users:E}))});n(574);function Ye(){var e=Object(o.useState)(""),t=Object(s.a)(e,2),n=t[0],a=t[1],r=Object(o.useState)(""),u=Object(s.a)(r,2),m=u[0],i=u[1];return l.a.createElement("div",{className:"joinOuterContainer_chat"},l.a.createElement("div",{className:"joinInnerContainer_chat"},l.a.createElement("h1",{className:"heading"},"Join"),l.a.createElement("div",null,l.a.createElement("input",{placeholder:"Name",className:"joinInput_chat",type:"text",onChange:function(e){return a(e.target.value)}})),l.a.createElement("div",null,l.a.createElement("input",{placeholder:"Room",className:"joinInput_chat mt-20_chat",type:"text",onChange:function(e){return i(e.target.value)}})),l.a.createElement(c.b,{onClick:function(e){return n&&m?null:e.preventDefault()},to:"/chat?name=".concat(n,"&room=").concat(m)},l.a.createElement("button",{className:"button_chat mt-20_chat",type:"submit"},"Sign In"))))}var Ve=function(){return l.a.createElement(h,null,l.a.createElement(c.a,null,l.a.createElement(m.a,null,l.a.createElement(O,null),l.a.createElement(u.b,{exact:!0,path:"/",component:de}),l.a.createElement(y,{exact:!0,path:"/login",component:Ae}),l.a.createElement(y,{exact:!0,path:"/register",component:Oe}),l.a.createElement(u.b,{exact:!0,path:"/posts/:postId",component:Ne}),l.a.createElement(u.b,{exact:!0,path:"/profile",component:he}),l.a.createElement(u.b,{path:"/join",exact:!0,component:Ye}),l.a.createElement(u.b,{path:"/chat",component:We}))))},Fe=n(68),Ke=n(318),He=n(320),Xe=n(30),Ze=n(319),et=Object(He.a)({uri:"https://52.1.4.45:5000"}),tt=Object(Ze.a)(function(){var e=localStorage.getItem("jwtToken");return{headers:{Authorization:e?"Bearer ".concat(e):""}}}),nt=new Fe.c({link:tt.concat(et),cache:new Ke.a}),at=l.a.createElement(Xe.a,{client:nt},l.a.createElement(Ve,null));r.a.render(at,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[328,1,2]]]);
//# sourceMappingURL=main.8eabf3ee.chunk.js.map